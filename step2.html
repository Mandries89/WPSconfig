<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Configuration Form - Step 2</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="header-left">
                <div class="info-box">In te vullen door de klant</div>
                <div class="info-box">In te vullen door WPS</div>
            </div>
            <div class="header-center">
                <img src="logo.png" alt="WPS Logo" class="logo">
            </div>
            <div class="header-right"></div>
        </header>

        <form id="step2Form" name="configFormStep2" method="POST" data-netlify="true" onsubmit="handleSubmit(event)">
            <input type="hidden" name="form-name" value="configFormStep2">
            
            <!-- Hidden inputs to retain data from step 1 -->
            <input type="hidden" name="projectName" value="">
            <input type="hidden" name="address" value="">
            <input type="hidden" name="street" value="">
            <input type="hidden" name="postalCode" value="">
            <input type="hidden" name="city" value="">
            <input type="hidden" name="country" value="">
            <input type="hidden" name="customerProjectLeader" value="">
            <input type="hidden" name="email" value="">
            <input type="hidden" name="phone" value="">
            <input type="hidden" name="wpsProjectLeader" value="">
            <input type="hidden" name="wpsSalesManager" value="">
            <input type="hidden" name="installationDate" value="">
            
            <!-- Vraag naar aantal secties -->
            <div class="form-group">
                <label for="numSections">Number of sections</label>
                <input type="number" id="numSections" name="numSections" min="1" required>
                <button type="button" onclick="generateSections()">Generate Sections</button>
            </div>

            <!-- Placeholder voor secties -->
            <div id="sectionsContainer"></div>

            <input type="submit" value="Submit">
        </form>
        <button onclick="goBack()">Back</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            document.querySelectorAll('input[type="hidden"]').forEach(input => {
                input.value = sessionStorage.getItem(input.name);
            });
        });

        function generateSections() {
            const numSections = document.getElementById('numSections').value;
            const sectionsContainer = document.getElementById('sectionsContainer');
            sectionsContainer.innerHTML = '';  // Clear previous sections

            const table = document.createElement('table');
            const headerRow = document.createElement('tr');
            headerRow.innerHTML = `
                <th>Parking Sections</th>
                <th>Name</th>
                <th>Spaces</th>
                <th>Entry</th>
                <th>Exit</th>
                <th>C-display</th>
                <th>Remark</th>
            `;
            table.appendChild(headerRow);

            for (let i = 1; i <= numSections; i++) {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>Section ${i}</td>
                    <td><input type="text" name="section${i}Name" value="in te vullen indien meerdere secties" required></td>
                    <td><input type="number" name="section${i}Spaces" required></td>
                    <td><input type="number" name="section${i}Entry" required></td>
                    <td><input type="number" name="section${i}Exit" required></td>
                    <td>
                        <select name="section${i}Cdisplay">
                            <option value="Yes">Yes</option>
                            <option value="No" selected>No</option>
                        </select>
                    </td>
                    <td><input type="text" name="section${i}Remark"></td>
                `;
                table.appendChild(row);
            }

            sectionsContainer.appendChild(table);
        }

        function handleSubmit(event) {
            event.preventDefault();
            // Process and submit the form data
            const formData = new FormData(event.target);
            for (let [key, value] of formData.entries()) {
                sessionStorage.setItem(key, value);
            }
            event.target.submit();
        }

        function goBack() {
            window.location.href = "index.html";
        }
    </script>
</body>
</html>
